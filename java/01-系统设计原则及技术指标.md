互动。

后端架构。

架构面试：

晁鹏飞。平台，班主任。

# 系统-技术设计原则

**好系统是迭代出来的**。

先解决核心的问题，预测未来可能出现的问题。第一版 1000人，所以单机。

不要过度复杂化系统。

先行的规划和设计。

对现有的问题有方案，对未来系统有预案。

**无状态原则：**

无状态：对单词请求的处理，不依赖于其他的请求。

处理一次请求所需的全部信息，都在这个请求中，要么可以从外部获取（配置文件，外部存储（redis）），

服务器本身不存储任何信息。

总结：服务器是不保存请求状态的服务，就是无状态。

所有需要鉴权的都是有状态？token。

服务器是不是可以 无限扩展，水平扩展。

token：

1。 不存token。坏处：不好控制。token可以自过期（jwt）。

2。存token。坏处：存储负担。

**拆分原则：**

巨石系统。

用户量大，业务复杂了，公司可以投入的资源多了。

拆：高内聚，低耦合。

**系统维度**：商品系统，购物车系统，支付系统，优惠券系统等等。

需要和产品经理配合。

电商系统：用户系统，订单系统。

将这个系统尽量做成黑盒。

**功能维度**：优惠券系统：后台创建券的系统，用户领券系统，用券系统。

**读写维度：**读写比例特征进行拆分。读服务（多级缓存）和写服务（分区、分库分表）。

**切面**：cdn。对系统功能进行详细的梳理。aop。

**模块**：基础架构组，二方库。数据库连接模块，分库分表模块，综合消息队列（统一配置，主流消息队列 ），。

**服务化原则**：单节点？节点集群？

服务化原则：1万个服务，url。服务治理：自动注册与发现。流量不可控，限流、熔断、降级、隔离、恢复。

项目介绍。**带上自己的思考**。

代码：埋点。

# 系统-业务设计原则

防重原则，幂等原则

识别什么是重复？读？和写（有些不用，逻辑删除update 0->0，update set = 0 where = 1）,每次都+1。？。

针对重复做拒绝。

模块服用原则：当你有拷贝欲望的时候，就要考虑代码的重构了。沉淀通用功能。

可追溯原则：任何问题，要有据可查，要好定位。

反馈原则：给调用方一个明确的反馈。

A：用户名不存在，账号密码错误，用户无权限。

B：登录错误，请重试。

备份原则：

代码备份：git，分支

数据备份：运维备份。操作记录备份。

人员备份：也就是 不因某个人离职，而导致项目的停滞。

**规范**。定期review，提交之前有责任人。罚款。gerrit。

分享：挑刺。

# 软件质量衡量标准

从你不同的维度对我负责的项目进行评判。 面试、**晋升，工作中。**

晋升：总结过去（衡量的标准），展望未来

ios/iec 250xxxxx。

功能性：满足功能要求。

效能：投入多少，产出多少。

兼容性：

易用性：

可靠性：容错，可恢复。

安全：

可维护性：

可移植性：

---

我自己舒服，第二别人觉得我厉害。

---

答疑：

二方库：自己公司内部的公共模块。

在别人的烂代码上做功能扩展怎么破？感觉烂又不敢动，太难了。

解决方案：保证黑盒。由小到大（一行代码，一个方法，一个类，一个模块）。

互联网项目：oa（卖出去的）。bat。

**表现自己的思考。**

# 系统衡量指标

## 吞吐量

单位时间内，能接受和发出的数据量。业务、配置。

TPS:  Transaction Per Second，事务：请求，处理，响应。

QPS：Queries Per Second，

tps和qps：之间的换算关系，必须由指定的业务场景来定。

## 并发数

300  并发用户数？并发连接数？并发请求数？并发线程数？

## 响应时间&平均响应时间

RT：

阿姆达尔定理：

加速比：Rm=T老/T新。

增强比例：p=m/总

T新=T老 * [(1-p)+p/Rm]

P大的。Rm

io。Rm

---

可靠性指标

串联：99%   99%   99%   99%  99%  越乘以 越小= 95%

冗余：

并联：1-(1-r1)*(1-r2)(1-r3)**  越乘以 越大？

消除单点。

化串联为并联：

你出去买东西，一手交钱一手交货。你从网上买东西时，你先付钱，一段时间后才会给你发货，这就爸交钱和交货分开了，它能不能发货不影响你付账

# 项目面试要点

需求。必须熟悉。

解决方案。校验，token，黑名单，权限。

难点。重点：过程。找原因（原理，源码），并解决。

1。突出解决问题的能力。2。技术深度。

不好编，作为一个大牛，怎么可以有难点

黄晟

可以说项目中遇到的问题、瓶颈，怎么解决的
